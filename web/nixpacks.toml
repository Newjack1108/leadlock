# Next.js Frontend Build Configuration
# Root directory must be set to 'web' in Railway.
# Keep start minimal: next start -H 0.0.0.0 -p $PORT (Railway sets PORT).

[phases.setup]
nixPkgs = ["nodejs"]

[phases.install]
cmds = ["npm ci"]

[phases.build]
cmds = ["npm run build"]

[variables]
# So "next" is found at runtime (Nixpacks bakes this into the image)
PATH = "/app/node_modules/.bin:${PATH}"

[start]
cmd = "next start -H 0.0.0.0 -p $PORT"
