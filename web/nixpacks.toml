# Next.js Frontend Build Configuration
# This file is for the web frontend only. Root directory must be set to 'web' in Railway.
# Nixpacks will auto-detect Node.js from package.json, but we specify it explicitly here.

[phases.setup]
nixPkgs = ["nodejs"]

[phases.install]
cmds = ["npm ci"]

[phases.build]
cmds = ["npm run build"]

[start]
# Set PATH so node and next are found (nix profile + node_modules/.bin)
cmd = "export PATH=/app/node_modules/.bin:/root/.nix-profile/bin:/nix/var/nix/profiles/default/bin:$PATH && npm start"
